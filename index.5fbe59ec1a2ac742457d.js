(()=>{"use strict";var t={91:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},440:(t,e,r)=>{t.exports=r.p+"assets/favicon.png"},861:(t,e,r)=>{t.exports=r.p+"assets/logo.png"},475:(t,e,r)=>{t.exports=r.p+"assets/sim-card-chip.png"}},e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var i=e[a]={exports:{}};return t[a](i,i.exports,r),i.exports}r.m=t,r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.b=document.baseURI||self.location.href,(()=>{var t=r(91),e=r.n(t),a=new URL(r(440),r.b);e()(a);const n=class{constructor(t,e){this.container=document.createElement(t),this.container.className=e}render(){return this.container}};function i(t,e){const{paramName:r,paramValue:a,isAdded:n}=function(t,e){var r;let a="",n="",i=!1;const s=h(),o=function(){const t=[],e=h();for(const r of e.keys())t.push(r);return t}(),c=p();if(-1===o.indexOf(t))a=t,n=e;else if(c.includes(e)){i=!0,a=t;const n=null===(r=s.get(a))||void 0===r?void 0:r.split("↕");if(1!==(null==n?void 0:n.length)){const t=null==n?void 0:n.filter((t=>t!==e));void 0!==t&&s.set(a,t.join("↕")),d(s.toString())}else s.delete(a),d(s.toString())}else i=!0,a=t,n=s.get(a)+"↕"+e,s.set(a,n),d(s.toString());return{paramName:a,paramValue:n,isAdded:i}}(t,e);if(n)return;const i=h();i.append(r,a),d(i.toString())}function s(t){const e=h();e.delete(t),d(e.toString())}function o(t,e){const r=h();l(t)?r.set(t,e):r.append(t,e),d(r.toString())}function c(){return window.location.hash}function d(t){const e=u();window.location.hash=e+"?"+t}function u(){return c().split("?")[0].slice(1)||null}function l(t){return h().get(t)||null}function p(){const t=[],e=h();for(const r of e.keys())t.push(e.get(r));return t.join("↕")}function m(){return c().split("?")[1]}function h(){const t=m();return new URLSearchParams(t)}const g=class extends n{constructor(t,e){var r;super(t,e),this.searchInputValue=null!==(r=this.getSearchInputValue())&&void 0!==r?r:""}getSearchInputValue(){const t=l("search");if(t)return t[0].toLocaleUpperCase()+t.slice(1)}setFoundProductsAmount(){let t="";const e=this.container.querySelectorAll(".product");t=1===e.length&&"0"===e[0].id?"0":`${e.length}`,this.container.querySelector(".search__result-amount").textContent=t}addSearch(){return console.log(this.searchInputValue),`\n      <div class="search">\n        <input class="search__input" type="search" title="Для поиска необходимо нажать 'Enter' либо кнопку 'Поиск'"  placeholder="Какой товар Вас интересует?"\n        autocomplete="off" value="${this.searchInputValue}">\n        <input class="search__input search__input-find" type="button" value="Поиск"></input>\n        <input class="search__input search__input-reset" type="button" value="Очистить"></input>\n        <div class="search__result">\n          <span class="search__result-text">Товаров найдено:&nbsp;</span>\n          <span class="search__result-amount">0</span>\n        </div>\n      </div">\n    `}render(){const t=this.addSearch();return this.container.innerHTML=t,this.container}},_=class extends n{constructor(t,e){super(t,e),this.buttonActiveClass=this.checkViewParam()}checkViewParam(){var t;return`sort__view-${null!==(t=l("view"))&&void 0!==t?t:"column"}_active`}addSortView(){return this.checkViewParam(),`\n        <button class="sort__view sort__view-column ${this.buttonActiveClass}" data-view="column"></button>\n        <button class="sort__view sort__view-row ${this.buttonActiveClass}" data-view="row"></button>\n    `}render(){const t=this.addSortView();return this.container.innerHTML=t,this.container}};var b;!function(t){t.StorePage="store",t.CartPage="cart",t.ProductPage="product-details"}(b||(b={}));const v=[{id:b.StorePage},{id:b.CartPage},{id:b.ProductPage}],f=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu,w=/^[A-Za-zА-Яа-яЁё]{3,}\s{1,}([A-Za-zА-Яа-яЁё]{3,}){1,}$/iu,k=/\+\d{9,}$/iu,y=/^[A-Za-zА-Яа-яЁё]{5,}\s{1,}[A-Za-zА-Яа-яЁё]{5,}\s{1,}([A-Za-zА-Яа-яЁё]{5,}){1,}$/iu,S=/\d{4}\s\d{4}\s\d{4}\s\d{4}/iu,P=/^(0[1-9]|1[0-2])\/?([0-9]{2})$/iu,E=/\d{3}/iu,x=/^(?:4)$/iu,L=/^(?:5[1-5])$/iu,$=/^(?:2)$/iu,T={id:0,price:0,count:1},C=[{value:"default",text:"По-умолчанию"},{value:"p-des",text:"Цена ⬇"},{value:"p-asc",text:"Цена ⬆"},{value:"n-des",text:"Название ⬇"},{value:"n-asc",text:"Название ⬆"}],I=[{name:"rs",value:10},{name:"student1",value:1}],A=class extends n{constructor(t,e){super(t,e),this.sortOptions=[...C]}checkSortParam(){var t;return null!==(t=l("sort"))&&void 0!==t?t:"default"}getSortingOptions(t){const e=this.checkSortParam();let r="";return t.forEach((t=>{const a=e===t.value?"selected":"";r+=`\n        <option value="${t.value}" ${a}>${t.text}</option>\n      `})),r}addSortSelect(){return`\n    <label class="sort__label">Сортировать:\n      <select class="sort__select">\n        ${this.getSortingOptions(this.sortOptions)}\n      </select>\n    </label>\n  `}render(){const t=this.addSortSelect();return this.container.innerHTML=t,this.container}},O=class extends n{constructor(t,e){super(t,e),this.sortView=new _("div","sort__view-wrap"),this.sortSelect=new A("div","sort__label-wrap")}addSort(){const t=document.createElement("div");return t.className="sort",t.append(this.sortView.render()),t.append(this.sortSelect.render()),t}render(){return this.container.append(this.addSort()),this.container}},N=[{id:1,brand:"Kuchaland",title:"Кружка, 330 мл, 2 шт",price:2550,category:"Кружки",stock:20,description:"Идеально подходит для горячих или холодных напитков, препятствуя их быстрому остыванию или нагреву. Нельзя использовать в микроволновой печи.",material:"Стекло",color:"Прозрачный",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/1/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/1/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/1/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/1/3.webp"]},{id:2,brand:"AKIE",title:"Бокал для мартини, 240 мл",price:400,category:"Бокалы",stock:23,description:"По блеску и прозрачности этот бокал трудно отличить от хрустального, хотя он изготовлен из стекла без добавления свинца. Бокалы издают приятный звук, когда ими чокаются.",material:"Стекло",color:"Прозрачный",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/2/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/2/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/2/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/2/3.webp"]},{id:3,brand:"DomaYa",title:"Набор столовых приборов, 24 предмета",price:54e3,category:"Приборы",stock:7,description:"Столовые приборы с уникальным PVD-покрытием. Именно это покрытие позволяет создавать необычные актуальные оттенки приборов — медный, золотой и чёрный цвет.",material:"Латунь",color:"Золотой",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/3/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/3/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/3/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/3/3.webp"]},{id:4,brand:"DomaYa",title:"Тарелка обеденная, 27 см",price:2500,category:"Тарелки",stock:19,description:"Подходит для использования в микроволновой печи. Рекомендуется мыть вручную с применением мягких моющих средств.",material:"Фарфор",color:"Белый",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/4/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/4/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/4/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/4/3.webp"]},{id:5,brand:"Kuchaland",title:"Чайная пара, 240 мл, 2 шт",price:3990,category:"Кружки",stock:16,description:"Пара чайная, 2 персоны, 4 предмета. Подходит для использования в микроволновой печи.",material:"Фарфор",color:"Белый",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/5/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/5/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/5/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/5/3.webp"]},{id:6,brand:"Kuchaland",title:"Бокал для шампанского, 180 мл, 4 шт",price:3990,category:"Бокалы",stock:25,description:"Бокал для шампанского, 4 штуки. Рекомендуется мыть вручную с применением мягких моющих средств. Не использовать для ухода абразивные чистящие средства и жёсткие губки. Нельзя мыть в посудомоечной машине.",material:"Стекло",color:"Перламутр",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/6/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/6/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/6/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/6/3.webp"]},{id:7,brand:"AKIE",title:"Стакан POKAL, 350 мл",price:299,category:"Стаканы",stock:44,description:"Изготовлено из закаленного стекла, которое отличается долговечностью и особой ударопрочностью.",material:"Стекло",color:"Синий",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/7/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/7/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/7/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/7/3.webp"]},{id:8,brand:"Kuchaland",title:"Набор столовых приборов, 24 предмета",price:15990,category:"Приборы",stock:3,description:"Столовые приборы, 6 персон, 24 предмета. Не использовать для ухода абразивные чистящие средства и жёсткие губки. Можно мыть в посудомоечной машине.",material:"Сталь",color:"Серебристый",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/8/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/8/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/8/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/8/3.webp"]},{id:9,brand:"DomaYa",title:"Тарелка десертная, 24 см",price:3300,category:"Тарелки",stock:26,description:"Подходит для использования в микроволновой печи. Рекомендуется мыть вручную с применением мягких моющих средств.",material:"Фарфор",color:"Белый",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/9/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/9/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/9/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/9/3.webp"]},{id:10,brand:"Kuchaland",title:"Сервиз обеденный, 19 предметов",price:25990,category:"Сервизы",stock:7,description:"Сервиз обеденный, 6 персон, 19 предметов. Материал: фарфор Fine Bone China. Можно мыть в посудомоечной машине исключительно на щадящем режиме. Использование других режимов повлечет порчу декоративного орнамента. Подходит для использования в микроволновой печи.",material:"Фарфор",color:"Белый",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/10/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/10/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/10/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/10/3.webp"]},{id:11,brand:"DomaYa",title:"Бокал для вина, 650 мл",price:2500,category:"Бокалы",stock:13,description:"Бокал подойдет как для красного, так и для белого вина. Поставляется в подарочной упаковке по 1 шт.",material:"Стекло",color:"Прозрачный",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/11/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/11/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/11/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/11/3.webp"]},{id:12,brand:"AKIE",title:"Набор столовых приборов, 24 предмета",price:4990,category:"Приборы",stock:13,description:"Сделайте сервировку праздничной: воспользуйтесь столовыми приборами простой и лаконичной формы.",material:"Сталь",color:"Серебристый",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/12/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/12/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/12/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/12/3.webp"]},{id:13,brand:"DomaYa",title:"Набор тарелок десертных, 6 шт",price:8500,category:"Сервизы",stock:3,description:"Фарфоровую посуду этой серии отличает элегантный волнистый край. Оформите сервировку в едином традиционном стиле или комбинируйте предметы серии с другой посудой. Размер тарелок - 20 см.",material:"Фарфор",color:"Белый",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/13/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/13/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/13/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/13/3.webp"]},{id:14,brand:"Kuchaland",title:"Сервиз чайный, 15 предметов",price:12450,category:"Сервизы",stock:6,description:"Сервиз чайный, 6 персон, 15 предметов. Материал: фарфор Fine Bone China. Можно мыть в посудомоечной машине исключительно на щадящем режиме. Использование других режимов повлечет порчу декоративного орнамента. Подходит для использования в микроволновой печи.",material:"Фарфор",color:"Белый",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/14/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/14/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/14/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/14/3.webp"]},{id:15,brand:"DomaYa",title:"Бокал Cactus Yellow, 240 мл",price:3600,category:"Бокалы",stock:55,description:"Бокал подойдет как для красного, так и для белого вина. Поставляется в подарочной упаковке по 1 шт.",material:"Стекло",color:"Желтный",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/15/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/15/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/15/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/15/3.webp"]},{id:16,brand:"Kuchaland",title:"Стакан, 480 мл, 2 шт",price:2990,category:"Стаканы",stock:19,description:"Стакан, 2 штуки. Не использовать для ухода абразивные чистящие средства и жёсткие губки. Нельзя мыть в посудомоечной машине. Не подходит для использования в микроволновой печи.",material:"Стекло",color:"Прозрачный",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/16/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/16/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/16/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/16/3.webp"]},{id:17,brand:"AKIE",title:"Тарелка ФЭКЛАР, 26 см",price:990,category:"Тарелки",stock:51,description:"Отличное обрамление любого блюда. Тарелка ФЭКЛАР лаконичного дизайна прекрасно сочетается с другой столовой посудой. Выберите традиционную матовую поверхность или современную глянцевую.",material:"Фарфор",color:"Черный",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/17/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/17/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/17/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/17/3.webp"]},{id:18,brand:"DomaYa",title:"Чайная пара Pink Rose, 200 мл",price:1750,category:"Кружки",stock:10,description:"Идеально подходит для горячих или холодных напитков, препятствуя их быстрому остыванию или нагреву.",material:"Фарфор",color:"Розовый",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/18/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/18/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/18/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/18/3.webp"]},{id:19,brand:"DomaYa",title:"Набор столовых приборов, 24 предмета",price:30600,category:"Приборы",stock:5,description:"Сделайте сервировку праздничной: воспользуйтесь столовыми приборами простой и лаконичной формы.",material:"Сталь",color:"Серебристый",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/19/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/19/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/19/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/19/3.webp"]},{id:20,brand:"Kuchaland",title:"Набор столовых приборов, 68 предметов",price:35500,category:"Приборы",stock:8,description:"Столовые приборы, 12 персон, 68 предметов. Материал: нержавеющая сталь 18/10. Можно мыть в посудомоечной машине.",material:"Сталь",color:"Серебристый",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/20/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/20/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/20/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/20/3.webp"]},{id:21,brand:"DomaYa",title:"Бокал для игристого TUTU, 180 мл",price:2500,category:"Бокалы",stock:4,description:"Бокал флюте для шампанского (flute – «флейта») долго удерживает свои позиции и считается идеальным за счет способности удерживать пузырьки. Ценителям «флейты» DomaYa предлагает серию TUTU, которая отличается очень тонким и прочным стеклом.",material:"Стекло",color:"Прозрачный",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/21/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/21/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/21/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/21/3.webp"]},{id:22,brand:"DomaYa",title:"Набор хрустальных бокалов для игристого, 6 шт",price:18e3,category:"Бокалы",stock:9,description:"Необычные бокалы для вина, которые сочетают в себе традиции ремесленников и инновации современных дизайнеров. Всё, чтобы вы наслаждались комфортом и элегантностью одновременно.",material:"Хрусталь",color:"Прозрачный",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/22/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/22/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/22/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/22/3.webp"]},{id:23,brand:"AKIE",title:"Сервиз UPLAGG, 18 предметов",price:44990,category:"Сервизы",stock:2,description:"Фарфоровую посуду этой серии отличает элегантный волнистый край. Оформите сервировку в едином традиционном стиле или комбинируйте предметы серии с другой посудой.",material:"Фарфор",color:"Белый",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/23/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/23/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/23/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/23/3.webp"]},{id:24,brand:"DomaYa",title:"Тарелка обеденная, 28.5 см",price:1650,category:"Тарелки",stock:24,description:"Подходит для использования в микроволновой печи. Рекомендуется мыть вручную с применением мягких моющих средств.",material:"Фарфор",color:"Белый",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/24/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/24/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/24/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/24/3.webp"]},{id:25,brand:"Kuchaland",title:"Бокал для вина, 560 мл",price:9990,category:"Бокалы",stock:10,description:"Бокалы подойдут как для красного, так и для белого вина. Поставляется в подарочной упаковке по 2 шт.",material:"Стекло",color:"Прозрачный",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/25/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/25/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/25/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/25/3.webp"]},{id:26,brand:"DomaYa",title:"Набор тарелок десертных, 6 шт",price:7650,category:"Сервизы",stock:12,description:"Нежная плавность линий лиможского фарфора в сочетании с утончённой художественной отделкой, вызывают искреннее восхищение. Подходит для использования в микроволновой печи. Рекомендуется мыть вручную с применением мягких моющих средств.",material:"Фарфор",color:"Белый",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/26/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/26/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/26/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/26/3.webp"]},{id:27,brand:"AKIE",title:"Тарелка, 12x7 см",price:800,category:"Тарелки",stock:33,description:"Глазурованная тарелка насыщенного синего цвета с золотисто-коричневым ободком украсит любое блюдо.",material:"Фарфор",color:"Синий",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/27/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/27/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/27/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/27/3.webp"]},{id:28,brand:"Kuchaland",title:"Столовые приборы, 24 предмета",price:6990,category:"Приборы",stock:16,description:"Столовые приборы, 24 предмета. Материал: нержавеющая сталь 18/10. Рекомендуется мыть вручную во избежание появления царапин на поверхности приборов. Можно мыть в посудомоечной машине.",material:"Сталь",color:"Серебристый",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/28/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/28/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/28/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/28/3.webp"]},{id:29,brand:"DomaYa",title:"Чашка чайная, 250 мл",price:1250,category:"Кружки",stock:25,description:"Нежная плавность линий лиможского фарфора в сочетании с утончённой художественной отделкой, вызывают искреннее восхищение. Идеально подходит для горячих или холодных напитков, препятствуя их быстрому остыванию или нагреву. Нельзя использовать в микроволновой печи.",material:"Фарфор",color:"Белый",top:"true",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/29/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/29/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/29/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/29/3.webp"]},{id:30,brand:"Kuchaland",title:"Стакан, 330 мл, 2 шт",price:2990,category:"Стаканы",stock:28,description:"Стакан для холодных и горячих напитков, 2 штукию Объём: 330 мл. Материал: термостойкое стекло. ",material:"Стекло",color:"Прозрачный",top:"false",thumbnail:"https://raw.githubusercontent.com/vadim-m/api-fake/img/30/1.webp",images:["https://raw.githubusercontent.com/vadim-m/api-fake/img/30/1.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/30/2.webp","https://raw.githubusercontent.com/vadim-m/api-fake/img/30/3.webp"]}],B=class{constructor(){this.products=[],this.keyName="products",this.keyOneName="quick-product",this.promoName="promo-codes"}addPromoCode(){const t=l("promo");if(t)return localStorage.setItem(this.promoName,JSON.stringify(t)),{promoCode:t}}getPromoCode(){const t=localStorage.getItem(this.promoName);return null!==t?JSON.parse(t):[]}getProducts(){const t=localStorage.getItem(this.keyName);return null!==t?JSON.parse(t):[]}putProducts(t,e){const r=this.getProducts(),a=r.findIndex((e=>e.id===t));return-1===a?(T.id=t,T.price=e,r.push(T)):r.splice(a,1),localStorage.setItem(this.keyName,JSON.stringify(r)),{products:r}}putProductQuick(t,e){const r=this.getProducts();return-1===r.findIndex((e=>e.id===t))&&(T.id=t,T.price=e,r.push(T)),localStorage.setItem(this.keyName,JSON.stringify(r)),{products:r}}putOneProductQuick(t){const e=t;return localStorage.setItem(this.keyOneName,JSON.stringify(e)),{product:e}}clearOneProductQuick(){localStorage.removeItem(this.keyOneName)}clearOLocalStorage(){localStorage.removeItem(this.keyName)}getOneProductQuick(){const t=localStorage.getItem(this.keyOneName);if(null!==t)return JSON.parse(t)}putOneTypeProducts(t,e){const r=this.getProducts(),a=r.findIndex((e=>e.id===+t));let n=null;return N.forEach((e=>{e.id===+t&&(n=e.price)})),e?(r[a].count=++r[a].count,r[a].price=r[a].price+n):n&&(r[a].count=--r[a].count,r[a].price=r[a].price-n),localStorage.setItem(this.keyName,JSON.stringify(r)),{products:r}}getOneTypeProductsAmount(t){const e=this.getProducts(),r=e.findIndex((e=>e.id===+t));return e[r].count}getOneTypeProductPrice(t){const e=this.getProducts();let r=null;return e.forEach((e=>{e.id===+t&&(r=e.price)})),String(r)}getButtonState(t){let e=!1;return e=-1!==this.getProducts().findIndex((e=>e.id===t)),e}},q=class{constructor(){this.wrapper=document.querySelector(".wrapper")}},V=r(861),D=class extends q{constructor(){super(),this.localStorage=new B}countPrice(){const t=[];return this.localStorage.getProducts().forEach((e=>{t.push(e.price)})),t.length>0?t.reduce(((t,e)=>t+e)):0}countProducts(){const t=[];return this.localStorage.getProducts().forEach((e=>{t.push(e.count)})),t.length>0?t.reduce(((t,e)=>t+e)):0}render(){const t=document.querySelector(".header__container");t&&t.remove();const e=document.createElement("div");e.className="container  header__container";const r=`\n    <a class="header__logo" href="#${v[0].id}?">\n      <img src="${V}" alt="Site Logo!" class="header__logo-pic">\n    </a>\n    <div class="header__order">\n      <div class="header__amount">\n        <span class="header__sum">${this.countPrice()}</span>\n        <span class="header__currency">₽</span>\n      </div>\n      <a class="header__cart header__cart_filled" href="#${v[1].id}?">\n        <span class="header__cart-counter">${this.countProducts()}</span>\n      </a>\n    </div>\n    `;e.innerHTML=r,this.wrapper.prepend(e)}};function M(t,e){return Array.from(new Set(t.map((t=>t[e])))).sort()}const H=class extends n{constructor(t,e){super(t,e),this.products=[],this.productsComponents=[],this.getProducts(),this.listViewStyle=this.checkViewParam()}checkViewParam(){var t;return`catalog__list_${null!==(t=l("view"))&&void 0!==t?t:"column"}`}getProducts(){var t;this.products=this.filterProducts(),0===this.products.length&&(this.products=N);const e=null!==(t=l("sort"))&&void 0!==t?t:"default";this.sortProducts(e),this.productsComponents=this.products.map((t=>new class{constructor(t){this.product=t,this.getHtmlID=()=>`button__${this.product.id}`,this.localStorage=new B,this.header=new D,this.labelAdd="Добавить в корзину",this.labelRemove="Удалить из корзины",this.button=document.querySelector(".product__button_cart"),this.productViewStyle=this.checkViewParam()}handleSetLocationStorage(t,e){const r=this.localStorage.getButtonState(e);t.innerHTML=r?this.labelRemove:this.labelAdd}checkViewParam(){var t;return`product_${null!==(t=l("view"))&&void 0!==t?t:"column"}`}changeButtonLabel(){let t="";return t=-1===this.localStorage.getProducts().findIndex((t=>t.id===this.product.id))?this.labelAdd:this.labelRemove,t}render(){return`\n      <li class="catalog__item">\n        <article class="product ${this.productViewStyle}" id="${this.product.id}">\n          <div class="product__photo">\n            <div class="product__photo-main">\n              <a class="product__href" href="#${b.ProductPage}?id=${this.product.id}">\n                <img src="${this.product.thumbnail}" alt="Product image"\n                class="product__img">\n              </a>\n              <span class="product__top product__top_${this.product.top}">Top</span>\n            </div>\n          </div>\n          <div class="product__content">\n            <div class="product__info">\n              <a class="product__href" href="#${b.ProductPage}?id=${this.product.id}">\n                <h3 class="product__name">${this.product.title}</h3>\n              </a>\n            </div>\n            <div class="product__full-info">\n            <div class="product__price">${this.product.price} ₽</div>\n              <div class="product__brand">Бренд:\n                <span class="product__brand-value">${this.product.brand}</span>\n              </div>\n              <div class="product__color">Цвет:\n                <span class="product__color-value">${this.product.color}</span>\n              </div>\n              <div class="product__stock">В наличии:\n                <span class="product__stock-value">${this.product.stock}</span>\n              </div>\n              <div class="product__buttons">  \n                <button class="product__button product__button_cart" id="button__${this.product.id}">\n                  ${this.changeButtonLabel()}\n                </button>\n              </div>\n            </div>\n        </article>\n      </li>\n    `}addEvents(){const t=document.getElementById(this.getHtmlID());t&&t.addEventListener("click",(e=>{e.preventDefault(),this.localStorage.putProducts(this.product.id,this.product.price),this.header.render();const r=e.target;t&&this.handleSetLocationStorage(r,this.product.id)}))}}(t)))}filterProducts(){var t,e,r,a;const n=null!==(t=l("brand"))&&void 0!==t?t:M(N,"brand"),i=null!==(e=l("category"))&&void 0!==e?e:M(N,"category"),s=null!==(r=l("color"))&&void 0!==r?r:M(N,"color");let o=N.filter((t=>n.includes(t.brand)&&i.includes(t.category)&&s.includes(t.color)));const c=null!==(a=l("search"))&&void 0!==a?a:null;return c&&(o=this.filterProductsBySearchValue(o,c)),0===o.length?[{brand:"fake",category:"fake",color:"fake",description:"fake",id:0,images:[],material:"fake",price:0,stock:0,thumbnail:"https://basharathospital.clinta.biz/assets/under-construction.png",title:"Товаров не найдено",top:"fake"}]:o}filterProductsBySearchValue(t,e){const r=e.toLocaleLowerCase();return t.filter((t=>t.title.toLowerCase().includes(r)||t.brand.toLowerCase().includes(r)||t.color.toLowerCase().includes(r)||t.stock.toString().includes(r)||t.price.toString().includes(r)))}sortProducts(t){switch(t){case"p-asc":this.products.sort(((t,e)=>t.price-e.price));break;case"p-des":this.products.sort(((t,e)=>-t.price+e.price));break;case"n-asc":this.products.sort(((t,e)=>{const r=t.title.toLocaleLowerCase(),a=e.title.toLocaleLowerCase();return r>a?1:r<a?-1:0}));break;case"n-des":this.products.sort(((t,e)=>{const r=t.title[0],a=e.title[0];return r>a?-1:r<a?1:0}))}}addItems(){const t=document.createElement("ul");t.className=`catalog__list ${this.listViewStyle}`;const e=`${this.productsComponents.map((t=>t.render())).join("")}`;return t.innerHTML=e,t}render(){return this.container.append(this.addItems()),this.container}addEvents(){this.productsComponents.forEach((t=>t.addEvents()))}},K=class extends n{constructor(t,e){super(t,e),this.catalogSearch=new g("section","catalog__search"),this.catalogSort=new O("section","catalog__sort"),this.catalogList=new H("section","catalog__list-wrap")}addContent(){const t=document.createElement("div");return t.className="catalog__content-wrap",t.append(this.catalogSearch.render()),t.append(this.catalogSort.render()),t.append(this.catalogList.render()),t}render(){return this.container.append(this.addContent()),this.eventListener(),this.catalogSearch.setFoundProductsAmount.call(this),this.container}eventListener(){var t,e,r,a;this.container.querySelectorAll(".sort__view").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.dataset.view;e&&o("view",e)}))})),null===(t=this.container.querySelector(".sort__select"))||void 0===t||t.addEventListener("input",(t=>{const e=t.target;o("sort",e.options[e.selectedIndex].value)})),null===(e=this.container.querySelector(".search__input"))||void 0===e||e.addEventListener("search",(t=>{t.preventDefault();const e=t.target.value;""===e||" "===e?s("search"):o("search",e.toLocaleLowerCase())})),null===(r=this.container.querySelector(".search__input-find"))||void 0===r||r.addEventListener("click",(t=>{t.preventDefault();const e=this.container.querySelector(".search__input"),r=new Event("search");e.dispatchEvent(r)})),null===(a=this.container.querySelector(".search__input-reset"))||void 0===a||a.addEventListener("click",(t=>{t.preventDefault(),s("search");const e=this.container.querySelector(".search__input");e&&(e.value="")}))}},Y=class extends n{constructor(t,e,r,a){super(t,e),this.checkboxText="",this.category="",this.checkedAttr="",this.products=[...N],this.checkboxText=r,this.category=a}isChecked(t){return p().includes(t)?"checked":""}addCheckbox(t){let e="";return M(this.products,t).forEach((t=>{"string"==typeof t&&(this.checkedAttr=this.isChecked(t),e+=`\n        <label class="filters__checkbox">\n        <input class="filters__input hide" type="checkbox" name="${this.category}" value="${t}" ${this.checkedAttr}>\n        <span class="filters__checkbox-span"></span>${t}\n        </label>\n        `)})),`<legend class="filters__subtitle">${this.checkboxText}</legend>`+e}render(){const t=this.addCheckbox(this.category);return this.container.innerHTML=t,this.container}},R=class extends n{constructor(t,e){super(t,e)}addButtons(){return'\n      <button class="filters__btn filters__btn-reset">Сбросить</button>\n      <button class="filters__btn filters__btn-copy">Копировать</button>\n    '}render(){const t=this.addButtons();return this.container.innerHTML=t,this.container}},F=class extends n{constructor(t,e){super(t,e),this.filterBrand=new Y("fieldset","filters__group","Бренд:","brand"),this.filterCategory=new Y("fieldset","filters__group","Категории:","category"),this.filterColor=new Y("fieldset","filters__group","Цвет:","color"),this.filterButtons=new R("fieldset","filters__buttons")}renderFilters(){const t=document.createElement("form");return t.className="filters",t.append(this.filterBrand.render()),t.append(this.filterCategory.render()),t.append(this.filterColor.render()),t.append(this.filterButtons.render()),t}render(){return this.container.append(this.renderFilters()),this.eventListener(),this.container}eventListener(){var t,e;this.container.querySelectorAll(".filters__input").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target;i(e.name,e.value)}))})),null===(t=this.container.querySelector(".filters__btn-reset"))||void 0===t||t.addEventListener("click",(t=>{t.preventDefault(),d("")})),null===(e=this.container.querySelector(".filters__btn-copy"))||void 0===e||e.addEventListener("click",(t=>{t.preventDefault();const e=t.target;e.innerText="Успешно!";const r=window.location.href;navigator.clipboard.writeText(r),setTimeout((()=>{e.innerText="Копировать"}),1e3)}))}},U=class extends n{constructor(t,e){super(t,e),this.catalogFilters=new F("aside","catalog__filters"),this.catalogContent=new K("article","catalog__content")}addCatalog(){const t=document.createElement("div");return t.className="catalog",t.append(this.catalogFilters.render()),t.append(this.catalogContent.render()),t}render(){return this.container.append(this.addCatalog()),this.container}},j=class{constructor(t){this.mainEl=document.createElement("main"),this.mainEl.className=t}appendBlock(t){this.mainEl.append(t)}render(){return this.mainEl}},Q=class extends j{constructor(t){super(t),this.catalog=new U("div","container")}render(){return this.appendBlock(this.catalog.render()),this.mainEl}},J=r(475),z=class extends n{constructor(t,e){super(t,e)}renderCart(){const t=document.createElement("div");t.className="modal-form",t.id="modal-form";const e=`\n        <button class="modal-form__close" id="close">×</button>\n        <form class="form" id="form">\n          <h2 class="modal-form__title">Персональные данные</h2>\n          <div class="form__item">\n            <input class="form__input" placeholder="Имя и Фамилия" type="text" data-validationType="name">\n            <span class="form__error"></span>\n          </div>\n          <div class="form__item">\n            <input class="form__input" placeholder="Номер телефона" type="tel" value="+7" data-validationType="phone" id="tel">\n            <span class="form__error"></span>\n          </div>\n          <div class="form__item">\n            <input class="form__input" placeholder="Адрес доставки" type="text" data-validationType="address">\n            <span class="form__error"></span>\n          </div>\n          <div class="form__item">\n            <input class="form__input" placeholder="E-mail" type="text" data-validationType="email">\n            <span class="form__error"></span>\n          </div> \n\n          <h2 class="modal-form__title">Платежные данные</h2>\n          <div class="modal-form__credit-card-sample">\n            <img src="${J}" alt="sim-card-chip" class="modal-form__credit-card-chip"> \n            <div class="modal-form__card-type">МИР</div>\n          </div>\n          <div class="form__credit-info">\n            <div class="form__item">\n            <input class="form__input" placeholder="Номер карты" type="text" data-validationType="number" id="number">\n            <span class="form__error"></span>\n            </div> \n            <div class="form__card">\n              <div class="form__item">\n                <p>Срок:</p>\n                <input class="form__input" placeholder="Месяц/Год" type="text" data-validationType="date" id="date">\n                <span class="form__error"></span>\n              </div>\n              <div class="form__item">\n                <p>Код:</p>\n                <input class="form__input" placeholder="CVV" type="text" data-validationType="cvv" id="cvv">\n                <span class="form__error"></span>\n              </div>\n            </div>\n          </div>\n          \n          <button class="form__button product__button product__button_cart" id="submit" type="submit">ПОДТВЕРДИТЬ</button> \n        </form>\n    `;t.innerHTML=e,this.container.append(t)}render(){return this.renderCart(),this.container}},Z=class extends n{constructor(t,e){super(t,e)}renderCart(){const t=document.createElement("div");t.className="success-purchase",t.id="success",t.innerHTML="\n      <div success-purchase__title>ЗАКАЗ УСПЕШНО ОФОРМЛЕН!</div>\n    ",this.container.append(t)}render(){return this.renderCart(),this.container}},G=class extends n{constructor(t,e){super(t,e),this.promos=this.getPromos()}getPromos(){const t=l("promo");return t?t.split("↕"):null}addPromos(){let t="";return this.promos?(this.promos.forEach((e=>{var r;if("string"==typeof e){const a=(null!==(r=I.find((t=>t.name===e)))&&void 0!==r?r:{name:"fake",value:0}).value;t+=`\n        <label class="filters__checkbox">\n          <input class="filters__input hide" type="checkbox" name="promo" value="${e}"} checked>\n          <span class="filters__checkbox-span"></span>Скидка по промокоду ${e} - ${a}%\n        </label>\n        `}})),t):""}render(){const t=this.addPromos();return this.container.innerHTML=t,this.container}},W=class extends n{constructor(t,e){super(t,e),this.products=[],this.productsComponents=[],this.modal=new z("div","container"),this.sucessPurchase=new Z("div","container"),this.localStorage=new B,this.getProducts(),this.productsInStore=this.localStorage.getProducts(),this.header=new D,this.cartPromos=new G("div","card__promos"),this.activePromoPriceClass=this.checkActivatedPromo()}getProducts(){this.products=N,this.productsComponents=this.products.map((t=>new class{constructor(t){this.product=t,this.container=document.querySelector(".cart"),this.localStorage=new B}getId(){return this.product.id}render(){return`\n       <li class="catalog__item">\n       \n        <article class="product product_row cart__row" id="${this.product.id}">\n          <div class="product__photo cart__photo">\n            <div class="product__photo-main">\n              <a class="product__href" href="#${b.ProductPage}?id=${this.product.id}">\n                <img src="${this.product.thumbnail}" alt="Product image"\n                class="product__img">\n              </a>\n            </div>\n          </div>\n          <div class="product__content cart__content">\n            <div class="product__info">\n              <a class="product__href" href="#${b.ProductPage}?id=${this.product.id}">\n                <h3 class="product__name">${this.product.title}</h3>\n              </a>\n              <div class="product__category cart__category">Категория:\n                  <span class="product__category-value">${this.product.category}</span>\n              </div>\n              <div class="product__color cart__color">Цвет:\n                  <span class="product__color-value">${this.product.color}</span>\n                </div>\n              <div class="product__material cart__material">Материал:\n                  <span class="product__material-value">${this.product.material}</span>\n                </div>  \n            </div>\n          </div> \n          <div class="cart__item-price">\n            <div class="product__stock">В наличии:\n                  <span class="product__stock-value">${this.product.stock}</span>\n                </div>\n            <div class="product__buttons cart__buttons">\n            <div class="product__count">\n              <button class="product__count_minus">-</button>\n              <span class="product__count_amount">${this.localStorage.getOneTypeProductsAmount(String(this.product.id))}</span>\n              <button class="product__count_plus">+</button>\n            </div>\n            </div>\n            <div class="product__price">${this.localStorage.getOneTypeProductPrice(String(this.product.id))} ₽\n            </div>\n          </div>\n        </div>\n       </article>\n     </li>\n    `}}(t)))}getTotalAmount(){const t=[];return this.productsInStore.forEach((e=>{t.push(e.count)})),t.length>0?t.reduce(((t,e)=>t+e)):0}getTotalCost(){const t=[];return this.productsInStore.forEach((e=>{t.push(e.price)})),t.length>0?t.reduce(((t,e)=>t+e)):0}getPromoSales(){var t,e;const r=null!==(e=null===(t=l("promo"))||void 0===t?void 0:t.split("↕"))&&void 0!==e?e:[""],a=[];return console.log(r),r.forEach((t=>{var e;if("string"==typeof t){const r=(null!==(e=I.find((e=>e.name===t)))&&void 0!==e?e:{name:"fake",value:0}).value;a.push(r)}})),console.log(a),0===a.length?[0]:a}checkActivatedPromo(){return l("promo")?"active":""}renderCart(){const t=document.createElement("div");t.className="cart";const e=[],r=[];this.productsInStore.forEach((t=>{e.push(t.id)})),this.productsComponents.forEach((t=>{-1!==e.indexOf(t.getId())&&r.push(t)}));const a=this.cartPromos.addPromos(),n=`\n      <ul class="catalog__list">\n        ${r.map((t=>t.render())).join(" ")}\n      </ul>\n      <div class="cart__summary">\n        <h3 class="cart__title">ИТОГО</h3>\n        <div class="cart__amount"><span>Количество товаров:</span>\n          <div class="product__price">${this.getTotalAmount()}</div>\n        </div>\n        <div class="cart__price"><span>Стоимость товаров:</span>\n          <div class="cart__price-full ${this.activePromoPriceClass}">${this.getTotalCost()}₽\n          <span class="cart__price-discount">${function(t,e){const r=e.reduce(((t,e)=>t+e));return Math.round(t-t/100*r)}(this.getTotalCost(),this.getPromoSales())} ₽</span>\n          </div>\n        </div>\n          ${a}\n        <div class="cart__promocode">\n          <div class="cart__container">\n            <input class="cart__input" type="search" placeholder="Введите промокод" value="" type="text">\n            <button class="product__button product__button_click cart__promo-add" disabled>Добавить</button>\n          </div>\n            <div class="cart__promocode-value"></div>\n            <div class="cart__promocode-example">Например: "rs", "Student1"</div>\n        </div>\n        <button class="product__button product__button_cart cart__button" id="buy">\n          Купить\n        </button>\n      </div>\n      `;0===r.length?t.innerHTML='\n      <div class="cart__empty">КОРЗИНА ПУСТА</div>\n    ':t.innerHTML=n,this.container.append(t),this.container.append(this.modal.render()),this.container.append(this.sucessPurchase.render())}render(){return this.renderCart(),this.eventListener(),this.container}eventListener(){this.container.querySelectorAll("button").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target;"-"!==e.innerText&&"+"!==e.innerText||(i(e.name,e.value),this.changePlusMinus(e))}))}));const t=this.container.querySelector(".cart__input");null==t||t.addEventListener("keyup",(t=>{const e=t.target.value.toLocaleLowerCase(),r=this.container.querySelector(".cart__promo-add");r.disabled=!0;const a=I.findIndex((t=>t.name.toLocaleLowerCase()===e));-1!==a&&(this.container.querySelector(".cart__promocode-value").innerHTML=`Скидка по промокоду ${I[a].name} =  ${I[a].value}%`,r.disabled=!1)}));const e=this.container.querySelector(".cart__promo-add");null==e||e.addEventListener("click",(()=>{t&&(i("promo",t.value.toLocaleLowerCase()),t.value="")})),this.container.querySelectorAll(".filters__input  ").forEach((t=>t.addEventListener("change",(t=>{const e=t.target;i(e.name,e.value)}))))}changePlusMinus(t){const e=t.closest(".product__count"),r=null==e?void 0:e.querySelector(".product__count_amount"),a=t.closest(".cart__row"),n=a.querySelector(".product__stock-value");"product__count_plus"===t.classList.value&&r&&parseInt(r.innerText)<parseInt(n.innerText)&&(r.innerText=String(this.localStorage.getOneTypeProductsAmount(a.id)+1),this.localStorage.putOneTypeProducts(a.id,!0),this.header.render()),"product__count_minus"===t.classList.value&&(parseInt(r.innerText)>=1&&(r.innerText=String(this.localStorage.getOneTypeProductsAmount(a.id)-1),this.localStorage.putOneTypeProducts(a.id,!1),this.header.render()),parseInt(r.innerText)<1&&(this.localStorage.putProducts(parseInt(a.id),0),this.header.render()))}},X=class extends j{constructor(t){super(t),this.cart=new W("div","container")}render(){return this.appendBlock(this.cart.render()),this.mainEl}},tt=class extends n{constructor(t,e,r){super(t,e),this.id=r}renderBreadcrumbs(){const t=this.id,e=N.filter((e=>e.id===t))[0];return console.log(e),e?`\n      <ul class="breadcrumbs">\n        <li class="breadcrumbs__item">\n          <a class="breadcrumbs__link" href="#store?">Каталог</a>\n        </li>\n        <li class="breadcrumbs__item">\n          <a class="breadcrumbs__link" href="#store?brand=${e.brand}">${e.brand}</a>\n        </li>\n        <li class="breadcrumbs__item">\n          <a class="breadcrumbs__link" href="#store?category=${e.category}">${e.category}</a>\n        </li>\n        <li class="breadcrumbs__item">\n          <a class="breadcrumbs__link">${e.title}</a>\n        </li>\n      </ul>\n    `:'\n      <ul class="breadcrumbs">\n        <li class="breadcrumbs__item">\n          <a class="breadcrumbs__link" href="#store?">На главную</a>\n        </li>\n      </ul>\n      '}render(){return this.container.innerHTML=this.renderBreadcrumbs(),this.container}},et=class extends n{constructor(t,e,r){super(t,e),this.id=r,this.localStorage=new B,this.header=new D,this.labelAdd="Добавить в корзину",this.labelRemove="Удалить из корзины"}renderProduct(){const t=this.id,e=N.filter((e=>e.id===t))[0];return e?`\n    <article class="product" id="${e.id}">\n            <div class="product__photo">\n              <div class="product__photo-main">\n                <img src="${e.thumbnail}" alt="${e.title}"\n                  class="product__img">\n              </div>\n              <ul class="product__thumbnails">\n                <li class="product__thumbnail active">\n                  <button class="product__thumbnail-pic" data-thums="0" style="background-image: url(${e.images[0]})">\n                  </button>\n                </li>\n                <li class="product__thumbnail">\n                  <button class="product__thumbnail-pic" data-thums="1" style="background-image: url(${e.images[1]})"></button>\n                </li>\n                <li class="product__thumbnail">\n                  <button class="product__thumbnail-pic" data-thums="2" style="background-image: url(${e.images[2]})"></button>\n                </li>\n              </ul>\n            </div>\n            <div class="product__content">\n              <div class="product__info">\n                <h3 class="product__name">${e.title}</h3>\n                <div class="product__price">${e.price} ₽</div>\n              </div>\n              <div class="product__brand">Бренд:\n                <span class="product__brand-value">${e.brand}</span>\n              </div>\n              <div class="product__full-info">\n                <h4 class="product__description">Описание товара:</h4>\n                <p class="product__text">${e.description}</p>\n                <div class="product__category">Категория:\n                  <span class="product__category-value">${e.category}</span>\n                </div>\n                <div class="product__color">Цвет:\n                  <span class="product__color-value">${e.color}</span>\n                </div>\n                <div class="product__material">Материал:\n                  <span class="product__material-value">${e.material}</span>\n                </div>\n                <div class="product__stock">В наличии:\n                <span class="product__stock-value">${e.stock}</span>\n              </div>  \n              </div>\n              <div class="product__buttons">\n                <button class="product__button product__button_cart">\n                  ${this.changeButtonLabel()}\n                </button>\n                <button class="product__button product__button_click">\n                  Купить в один клик\n                </button>\n              </div>\n            </div>\n          </article>\n    `:'\n        <h3>\n          Товар с таким ID отсутствует!\n        </h3>\n        <hr>\n        <p>\n          <b>\n            <a href="#store?" style="color: var(--red)">\n              Вернуться на Главную\n            </a>\n          </b>\n        <p>\n      '}changeProductImageSrc(t,e){t.setAttribute("style","opacity: 0"),t.src=e,t.classList.add("product__img_replace"),setTimeout((()=>{t.classList.remove("product__img_replace"),t.setAttribute("style","opacity: 1")}),300)}changeThumbsActiveClass(t,e){e.querySelectorAll(".product__thumbnail").forEach((t=>{t.classList.remove("active")})),e.querySelectorAll(".product__thumbnail")[t].classList.add("active")}eventListener(){const t=this.container.querySelector(".product__thumbnails");t&&(t.addEventListener("click",(e=>{e.preventDefault();const r=e.target;if(r.classList.contains("product__thumbnail-pic")){const e=r.style.backgroundImage.slice(4,-1).replace(/"/g,""),a=this.container.querySelector(".product__img");this.changeProductImageSrc(a,e);const n=r.dataset.thums;if(!n)return;this.changeThumbsActiveClass(+n,t)}})),this.container.querySelectorAll(".product__button").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target,r=this.id,a=N.filter((t=>t.id===r))[0];"ДОБАВИТЬ В КОРЗИНУ"===e.innerText||"УДАЛИТЬ ИЗ КОРЗИНЫ"===e.innerText?(this.localStorage.putProducts(a.id,a.price),this.header.render(),this.handleSetLocationStorage(e,a.id)):"КУПИТЬ В ОДИН КЛИК"===e.innerText&&(this.localStorage.putProductQuick(a.id,a.price),this.header.render(),this.localStorage.putOneProductQuick(a.id),window.location.hash="#cart?")}))})))}render(){return this.container.innerHTML=this.renderProduct(),this.eventListener(),this.container}changeButtonLabel(){let t="";return t=-1===this.localStorage.getProducts().findIndex((t=>t.id===this.id))?this.labelAdd:this.labelRemove,t}handleSetLocationStorage(t,e){const r=this.localStorage.getButtonState(e);t.innerHTML=r?this.labelRemove:this.labelAdd}},rt=class extends j{constructor(t){super(t),this.product=new et("div","container",this.getId()),this.breadcrumbs=new tt("div","container",this.getId())}getId(){const t=l("id");if(t)return+t}render(){return this.appendBlock(this.breadcrumbs.render()),this.appendBlock(this.product.render()),this.mainEl}},at=class extends n{constructor(t,e){super(t,e)}renderFooter(){const t=document.createElement("div");t.className="container footer__container",t.innerHTML='\n      <div class="footer__info">© 2022</div>\n      <div class="footer__authors">\n        <a class="footer__link footer__link_github" href="https://github.com/vadim-m" target="_blank"></a>\n        <span class="footer__author">@vadim-m</span>\n        <a class="footer__link footer__link_github" href="https://github.com/Varvarkadikarka" target="_blank"></a>\n        <span class="footer__author">@varvarkadikarka</span>\n      </div>\n      <a class="footer__link footer__link_rss" href="https://rs.school/js/" target="_blank"></a>\n    ',this.container.append(t)}render(){return this.renderFooter(),this.container}},nt=class extends n{constructor(t,e){super(t,e)}renderError(){const t=document.createElement("div");t.className="error";const e=`\n      <div class="error__text">\n        <h1 class="error__title">Oops!</h1>\n        <h2 class="error__subtitle">YOU'RE LOST...</h2>\n        <h3 class="error__number">Error code: 404</h3>\n        <h3 class="error__button">\n          <a href="#${v[0].id}?">BACK TO HOMEPAGE</a>\n        </h3>\n      </div>\n      <div class="error__img-main">\n        <img src="https://i.ibb.co/sCkPhrF/dino-bat-1.gif" alt="Error image" class="error__img">\n      </div>\n    `;t.innerHTML=e,this.container.append(t)}render(){return this.renderError(),this.container}},it=class extends j{constructor(t){super(t),this.error=new nt("div","container")}render(){return this.appendBlock(this.error.render()),this.mainEl}},st=new B,ot=new D;function ct(){document.getElementById("modal-form").classList.add("modal-form__open"),st.clearOneProductQuick()}function dt(){document.getElementById("modal-form").classList.remove("modal-form__open")}function ut(t){if(t.preventDefault(),function(t){let e=!0;return t.querySelectorAll(".form__input").forEach((t=>{const r=function(t){const e=t.value;switch(t.dataset.validationtype){case"name":return w.test(e);case"phone":return k.test(e);case"address":return y.test(e);case"email":return f.test(e);case"number":return S.test(e);case"date":return P.test(e);case"cvv":return E.test(e);default:return""!==e}}(t);r?function(t){t.classList.contains("error")&&(t.classList.remove("error"),t.nextElementSibling&&(t.nextElementSibling.textContent=""))}(t):(function(t,e){t.classList.contains("error")?t.nextElementSibling&&t.nextElementSibling.textContent&&0!=t.nextElementSibling.textContent.length&&(t.nextElementSibling.textContent=e):(t.classList.add("error"),t.nextElementSibling&&(t.nextElementSibling.textContent=e))}(t,"Ошибка"),e=!1)})),e}(document.getElementById("form"))){const t=document.getElementById("success");null==t||t.classList.add("success-purchase_open"),setTimeout((function(){null==t||t.classList.remove("success-purchase_open"),st.clearOLocalStorage(),ot.render(),window.location.hash="#store?"}),2500)}}function lt(t){t.target.value=t.target.value.slice(0,19),t.target.value=t.target.value.replace(/[^0-9]/gi,"").replace(/(.{4})/g,"$1 ").trim()}function pt(t){t.target.value=t.target.value.slice(0,5),2===t.target.value.length?t.target.value=t.target.value+"/":3===t.target.value.length&&"/"===t.target.value.charAt(2)&&(t.target.value=t.target.value.replace("/",""))}function mt(t){t.target.value=t.target.value.slice(0,3)}function ht(t){const e=t.target.value,r=document.querySelector(".modal-form__card-type");x.test(e)&&(r.innerText="VISA"),L.test(e)&&(r.innerText="Master Card"),$.test(e)&&(r.innerText="МИР")}class gt{constructor(){this.catalogList=new H("main","main"),this.header=new D,this.footer=new at("footer","footer")}static renderNewPage(t){const e=document.querySelector(`#${gt.defaultPageId}`);e&&e.remove();let r=null;switch(t){case b.StorePage:r=new Q("content");break;case b.CartPage:r=new X("content");break;case b.ProductPage:r=new rt("content");break;default:r=new it("content")}if(r){const t=r.render(),e=document.querySelector(".footer");t.id=gt.defaultPageId,gt.container.insertBefore(t,e),document.getElementById("buy")&&function(){const t=document.getElementById("buy"),e=document.getElementById("close"),r=document.getElementById("form"),a=document.getElementById("number"),n=document.getElementById("date"),i=document.getElementById("cvv");t&&e&&r&&a&&n&&i&&(t.addEventListener("click",ct),st.getOneProductQuick()&&ct(),e.addEventListener("click",dt),r.addEventListener("submit",ut),a.addEventListener("input",lt),a.addEventListener("keyup",ht),n.addEventListener("keyup",pt),i.addEventListener("input",mt))}()}}enableRouteChange(){window.addEventListener("hashchange",(()=>{var t;const e=null!==(t=u())&&void 0!==t?t:"store";gt.renderNewPage(e),this.catalogList.addEvents()}))}run(){var t,e;this.header.render();const r=null!==(t=u())&&void 0!==t?t:"store",a=null!==(e=m())&&void 0!==e?e:"";gt.renderNewPage(r),window.location.hash=r+"?"+a,gt.container.append(this.footer.render()),this.enableRouteChange()}addEvents(){this.catalogList.addEvents()}}gt.container=document.querySelector(".wrapper"),gt.main=document.querySelector(".main"),gt.defaultPageId="current-page";const _t=new gt;_t.run(),_t.addEvents()})()})();